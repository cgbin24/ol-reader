import{a as c,x as R,o as S,i as x,j as k,D as s,X as T,Y as W,p as N,C as q,E as z,F as I}from"./@vue.Br72Imo5.js";import{a as V,b as A,c as C,__tla as B}from"./pdfjs-dist.N0_wRIGX.js";import{_ as L,__tla as O}from"../app.vTDh_Ym8.js";let j,X=Promise.all([(()=>{try{return B}catch{}})(),(()=>{try{return O}catch{}})()]).then(async()=>{let u,v,g,m,f,w,_,h;u=l=>(z("data-v-b5f27d88"),l=l(),I(),l),v={class:"pdfPreview"},g={class:"page-tool"},m={class:"page-tool-item"},f={key:0,class:"loading"},w=u(()=>s("div",{class:"loading-content"},[s("div",{class:"loading-icon"}),s("div",{class:"loading-text"},"Loading...")],-1)),_=[w],h={__name:"pd2",props:{src:{type:String,required:!0}},setup(l){const n=l,t=c(null),a=R({source:n.src,pageNum:1,scale:1,numPages:1}),b=c(!0),p=c(null),r=c(!1),E=()=>{a.pageNum>1&&(a.pageNum-=1,P())},$=()=>{a.pageNum<a.numPages&&(a.pageNum+=1,P())};S(async()=>{r.value=!0,setTimeout(()=>{D()},1e3)});const D=async()=>{try{if(t.value){V.workerSrc=`https://cdnjs.cloudflare.com/ajax/libs/pdf.js/${A}/pdf.worker.min.mjs`;const e=await C(n.src).promise;a.numPages=e.numPages,await y()}}catch(e){console.error("Error initializing PDF viewer:",e)}finally{r.value=!1}},y=async()=>{try{if(t.value){const e=await(await C(n.src).promise).getPage(a.pageNum),i=e.getViewport({scale:a.scale});console.log("viewport:",i);const d=t.value.getContext("2d");if(d){const o=window.devicePixelRatio||1;t.value.width=i.width*o,t.value.height=i.height*o,t.value.style.width=`${p.value.style.width}px`,t.value.style.height=`${p.value.style.height}px`,d.setTransform(o,0,0,o,0,0);const F={canvasContext:d,viewport:i};await e.render(F).promise,r.value=!1}}}catch(e){console.error("Error rendering page:",e)}},P=async()=>{await y()};return(e,i)=>(x(),k("div",v,[s("div",{class:"pdfWrap",ref_key:"pWrapRef",ref:p},[s("canvas",{ref_key:"canvas",ref:t,class:"pdfCanvas"},null,512)],512),T(s("div",g,[s("div",{class:"page-tool-item",onClick:E},"pre"),s("div",{class:"page-tool-item",onClick:$},"next"),s("div",m,N(a.pageNum)+" / "+N(a.numPages),1)],512),[[W,b.value]]),r.value?(x(),k("div",f,_)):q("",!0)]))}},j=L(h,[["__scopeId","data-v-b5f27d88"]])});export{j as P,X as __tla};
