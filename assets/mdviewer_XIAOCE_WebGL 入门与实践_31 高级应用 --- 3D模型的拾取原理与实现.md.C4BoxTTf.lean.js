import{_ as i}from"./app.BdTF1atn.js";import{j as a,D as Q,m as T,Z as t,i as s}from"./chunks/@vue.D6nrJjhM.js";/* empty css                          */import"./chunks/@vueuse.ErXst1iV.js";const x1=JSON.parse('{"title":"","description":"","frontmatter":{},"headers":[],"relativePath":"mdviewer/XIAOCE/WebGL 入门与实践/31 高级应用 --- 3D模型的拾取原理与实现.md","filePath":"mdviewer/XIAOCE/WebGL 入门与实践/31 高级应用 --- 3D模型的拾取原理与实现.md"}'),l={name:"mdviewer/XIAOCE/WebGL 入门与实践/31 高级应用 --- 3D模型的拾取原理与实现.md"},e=t("",12),n={class:"MathJax",jax:"SVG",style:{direction:"ltr",position:"relative"}},h={style:{overflow:"visible","min-height":"1px","min-width":"1px","vertical-align":"-0.186ex"},xmlns:"http://www.w3.org/2000/svg",width:"12.816ex",height:"1.731ex",role:"img",focusable:"false",viewBox:"0 -683 5664.6 765","aria-hidden":"true"},d=t("",1),r=[d],o=Q("mjx-assistive-mml",{unselectable:"on",display:"inline",style:{top:"0px",left:"0px",clip:"rect(1px, 1px, 1px, 1px)","-webkit-touch-callout":"none","-webkit-user-select":"none","-khtml-user-select":"none","-moz-user-select":"none","-ms-user-select":"none","user-select":"none",position:"absolute",padding:"1px 0px 0px 0px",border:"0px",display:"block",width:"auto",overflow:"hidden"}},[Q("math",{xmlns:"http://www.w3.org/1998/Math/MathML"},[Q("mi",null,"P"),Q("mn",null,"1"),Q("mo",null,"="),Q("mi",null,"M"),Q("mi",null,"×"),Q("mi",null,"P"),Q("mn",null,"0")])],-1),p=Q("h5",{id:"_2、世界空间坐标转换成观察空间坐标",tabindex:"-1"},"2、世界空间坐标转换成观察空间坐标 ​",-1),m=Q("p",null,"将摄像机放在世界空间中的某个位置，以摄像机为原点建立观察坐标系，P0 在该空间下的坐标为 P2。",-1),k=Q("p",null,"假设世界空间到观察空间的变换矩阵为 V，则有：",-1),g={class:"MathJax",jax:"SVG",style:{direction:"ltr",position:"relative"}},c={style:{overflow:"visible","min-height":"1px","min-width":"1px","vertical-align":"-0.186ex"},xmlns:"http://www.w3.org/2000/svg",width:"12.178ex",height:"1.731ex",role:"img",focusable:"false",viewBox:"0 -683 5382.6 765","aria-hidden":"true"},H=t("",1),y=[H],E=Q("mjx-assistive-mml",{unselectable:"on",display:"inline",style:{top:"0px",left:"0px",clip:"rect(1px, 1px, 1px, 1px)","-webkit-touch-callout":"none","-webkit-user-select":"none","-khtml-user-select":"none","-moz-user-select":"none","-ms-user-select":"none","user-select":"none",position:"absolute",padding:"1px 0px 0px 0px",border:"0px",display:"block",width:"auto",overflow:"hidden"}},[Q("math",{xmlns:"http://www.w3.org/1998/Math/MathML"},[Q("mi",null,"P"),Q("mn",null,"2"),Q("mo",null,"="),Q("mi",null,"V"),Q("mi",null,"×"),Q("mi",null,"P"),Q("mn",null,"1")])],-1),w=Q("h5",{id:"_3、观察空间坐标转换到裁剪空间坐标",tabindex:"-1"},"3、观察空间坐标转换到裁剪空间坐标 ​",-1),L=Q("p",null,"该阶段以透视投影为例，P0 在该空间下的坐标为 P3。 假设观察空间到裁剪空间的变换矩阵为 P，则有：",-1),u={class:"MathJax",jax:"SVG",style:{direction:"ltr",position:"relative"}},x={style:{overflow:"visible","min-height":"1px","min-width":"1px","vertical-align":"-0.186ex"},xmlns:"http://www.w3.org/2000/svg",width:"12.137ex",height:"1.731ex",role:"img",focusable:"false",viewBox:"0 -683 5364.6 765","aria-hidden":"true"},_=t("",1),f=[_],M=Q("mjx-assistive-mml",{unselectable:"on",display:"inline",style:{top:"0px",left:"0px",clip:"rect(1px, 1px, 1px, 1px)","-webkit-touch-callout":"none","-webkit-user-select":"none","-khtml-user-select":"none","-moz-user-select":"none","-ms-user-select":"none","user-select":"none",position:"absolute",padding:"1px 0px 0px 0px",border:"0px",display:"block",width:"auto",overflow:"hidden"}},[Q("math",{xmlns:"http://www.w3.org/1998/Math/MathML"},[Q("mi",null,"P"),Q("mn",null,"3"),Q("mo",null,"="),Q("mi",null,"P"),Q("mi",null,"×"),Q("mi",null,"P"),Q("mn",null,"2")])],-1),V=Q("h5",{id:"mvp-的由来",tabindex:"-1"},"MVP 的由来 ​",-1),D=Q("p",null,"以上三个空间变换矩阵一般情况都是在 CPU 中进行运算，通常我们将其按照顺序相乘得到一个混合变换矩阵 MVP。",-1),Z={class:"MathJax",jax:"SVG",style:{direction:"ltr",position:"relative"}},v={style:{overflow:"visible","min-height":"1px","min-width":"1px","vertical-align":"-0.186ex"},xmlns:"http://www.w3.org/2000/svg",width:"18.171ex",height:"1.731ex",role:"img",focusable:"false",viewBox:"0 -683 8031.6 765","aria-hidden":"true"},F=t("",1),C=[F],A=Q("mjx-assistive-mml",{unselectable:"on",display:"inline",style:{top:"0px",left:"0px",clip:"rect(1px, 1px, 1px, 1px)","-webkit-touch-callout":"none","-webkit-user-select":"none","-khtml-user-select":"none","-moz-user-select":"none","-ms-user-select":"none","user-select":"none",position:"absolute",padding:"1px 0px 0px 0px",border:"0px",display:"block",width:"auto",overflow:"hidden"}},[Q("math",{xmlns:"http://www.w3.org/1998/Math/MathML"},[Q("mi",null,"M"),Q("mi",null,"V"),Q("mi",null,"P"),Q("mo",null,"="),Q("mi",null,"P"),Q("mi",null,"×"),Q("mi",null,"M"),Q("mi",null,"×"),Q("mi",null,"V")])],-1),b=Q("p",null,"然后将该矩阵传递到GPU 中的顶点着色器程序中，将其与模型空间坐标相乘，得到裁剪空间坐标 P3。",-1),B=Q("h5",{id:"_4、裁剪空间坐标转换成-ndc-空间坐标",tabindex:"-1"},"4、裁剪空间坐标转换成 NDC 空间坐标 ​",-1),j=Q("p",null,"裁剪空间坐标 P3 是一个 4 维齐次坐标，GPU 会自动将各个分量同时除以齐次坐标 w，得到 NDC 空间下的坐标 P4，P4 此时处于边长为 2 的立方中。",-1),P=Q("h5",{id:"_5、ndc-空间坐标转换成屏幕坐标",tabindex:"-1"},"5、NDC 空间坐标转换成屏幕坐标 ​",-1),S=Q("p",null,"NDC 空间坐标处于边长为 2 的立方体中，它的坐标原点在屏幕正中央，Y 轴正向朝上，X 轴向右为正。这和屏幕坐标有所区别，屏幕坐标以屏幕左上角为原点，X 轴向右为正，Y 轴向下为正，所以此处仍然需要转换。",-1),R=Q("p",null,[Q("img",{src:"https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-user-assets/2019/3/27/169bcf47c921c68f~tplv-t2oaga2asx-jj-mark:3024:0:0:0:q75.awebp",alt:""})],-1),I=Q("p",null,"需要特别记住的是，坐标流水线的第一步到第三步，通常由开发者去运算得出。第四步到第五步，通常是由 GPU 自行运算，运算规则也比较简单。",-1),N=Q("p",null,"接下来我们反向执行该流水线操作，将屏幕上一点，反推到模型空间。",-1),X=Q("h4",{id:"屏幕空间到模型空间",tabindex:"-1"},"屏幕空间到模型空间 ​",-1),O={class:"MathJax",jax:"SVG",style:{direction:"ltr",position:"relative"}},G={style:{overflow:"visible","min-height":"1px","min-width":"1px","vertical-align":"-0.375ex"},xmlns:"http://www.w3.org/2000/svg",width:"2.44ex",height:"1.92ex",role:"img",focusable:"false",viewBox:"0 -683 1078.6 848.6","aria-hidden":"true"},J=t("",1),z=[J],Y=Q("mjx-assistive-mml",{unselectable:"on",display:"inline",style:{top:"0px",left:"0px",clip:"rect(1px, 1px, 1px, 1px)","-webkit-touch-callout":"none","-webkit-user-select":"none","-khtml-user-select":"none","-moz-user-select":"none","-ms-user-select":"none","user-select":"none",position:"absolute",padding:"1px 0px 0px 0px",border:"0px",display:"block",width:"auto",overflow:"hidden"}},[Q("math",{xmlns:"http://www.w3.org/1998/Math/MathML"},[Q("msub",null,[Q("mi",null,"P"),Q("mn",null,"5")])])],-1),W=Q("h5",{id:"_1、屏幕空间到-ndc-空间。",tabindex:"-1"},"1、屏幕空间到 NDC 空间。 ​",-1),U=Q("p",null,"屏幕坐标 P5 经过变换到达 NDC 空间 P4。假设 P5 坐标为 【Xp5，Yp5】，屏幕宽度为sWidth，高度为 sHeight，那么有如下等式：",-1),$={class:"MathJax",jax:"SVG",style:{direction:"ltr",position:"relative"}},q={style:{overflow:"visible","min-height":"1px","min-width":"1px","vertical-align":"-0.816ex"},xmlns:"http://www.w3.org/2000/svg",width:"15.33ex",height:"2.988ex",role:"img",focusable:"false",viewBox:"0 -960.1 6775.8 1320.7","aria-hidden":"true"},K=t("",1),Q3=[K],t3=Q("mjx-assistive-mml",{unselectable:"on",display:"inline",style:{top:"0px",left:"0px",clip:"rect(1px, 1px, 1px, 1px)","-webkit-touch-callout":"none","-webkit-user-select":"none","-khtml-user-select":"none","-moz-user-select":"none","-ms-user-select":"none","user-select":"none",position:"absolute",padding:"1px 0px 0px 0px",border:"0px",display:"block",width:"auto",overflow:"hidden"}},[Q("math",{xmlns:"http://www.w3.org/1998/Math/MathML"},[Q("mrow",{"data-mjx-texclass":"ORD"},[Q("mfrac",null,[Q("mrow",null,[Q("mi",null,"X"),Q("mi",null,"p"),Q("mn",null,"5")]),Q("mrow",null,[Q("mi",null,"s"),Q("mi",null,"W"),Q("mi",null,"i"),Q("mi",null,"d"),Q("mi",null,"t"),Q("mi",null,"h")])])]),Q("mo",null,"="),Q("mrow",{"data-mjx-texclass":"ORD"},[Q("mfrac",null,[Q("mrow",null,[Q("mi",null,"X"),Q("mi",null,"p"),Q("mn",null,"4"),Q("mo",null,"+"),Q("mn",null,"1")]),Q("mn",null,"2")])])])],-1),a3={class:"MathJax",jax:"SVG",style:{direction:"ltr",position:"relative"}},s3={style:{overflow:"visible","min-height":"1px","min-width":"1px","vertical-align":"-1.108ex"},xmlns:"http://www.w3.org/2000/svg",width:"18.098ex",height:"3.478ex",role:"img",focusable:"false",viewBox:"0 -1047.1 7999.1 1537.1","aria-hidden":"true"},T3=t("",1),i3=[T3],l3=Q("mjx-assistive-mml",{unselectable:"on",display:"inline",style:{top:"0px",left:"0px",clip:"rect(1px, 1px, 1px, 1px)","-webkit-touch-callout":"none","-webkit-user-select":"none","-khtml-user-select":"none","-moz-user-select":"none","-ms-user-select":"none","user-select":"none",position:"absolute",padding:"1px 0px 0px 0px",border:"0px",display:"block",width:"auto",overflow:"hidden"}},[Q("math",{xmlns:"http://www.w3.org/1998/Math/MathML"},[Q("mrow",{"data-mjx-texclass":"ORD"},[Q("mfrac",null,[Q("mrow",null,[Q("mi",null,"Y"),Q("mi",null,"p"),Q("mn",null,"5")]),Q("mrow",null,[Q("mi",null,"s"),Q("mi",null,"H"),Q("mi",null,"e"),Q("mi",null,"i"),Q("mi",null,"g"),Q("mi",null,"h"),Q("mi",null,"t")])])]),Q("mo",null,"="),Q("mrow",{"data-mjx-texclass":"ORD"},[Q("mfrac",null,[Q("mrow",null,[Q("mo",null,"−"),Q("mo",{stretchy:"false"},"("),Q("mi",null,"Y"),Q("mi",null,"p"),Q("mn",null,"4"),Q("mo",null,"−"),Q("mn",null,"1"),Q("mo",{stretchy:"false"},")")]),Q("mn",null,"2")])])])],-1),e3=Q("p",null,"所以，可以推出 P4 坐标：",-1),n3={class:"MathJax",jax:"SVG",style:{direction:"ltr",position:"relative"}},h3={style:{overflow:"visible","min-height":"1px","min-width":"1px","vertical-align":"-0.912ex"},xmlns:"http://www.w3.org/2000/svg",width:"15.564ex",height:"3.084ex",role:"img",focusable:"false",viewBox:"0 -960.1 6879.1 1363.1","aria-hidden":"true"},d3=t("",1),r3=[d3],o3=Q("mjx-assistive-mml",{unselectable:"on",display:"inline",style:{top:"0px",left:"0px",clip:"rect(1px, 1px, 1px, 1px)","-webkit-touch-callout":"none","-webkit-user-select":"none","-khtml-user-select":"none","-moz-user-select":"none","-ms-user-select":"none","user-select":"none",position:"absolute",padding:"1px 0px 0px 0px",border:"0px",display:"block",width:"auto",overflow:"hidden"}},[Q("math",{xmlns:"http://www.w3.org/1998/Math/MathML"},[Q("mi",null,"X"),Q("mi",null,"p"),Q("mn",null,"4"),Q("mo",null,"="),Q("mrow",{"data-mjx-texclass":"ORD"},[Q("mfrac",null,[Q("mrow",null,[Q("mn",null,"2"),Q("mi",null,"×"),Q("mi",null,"X"),Q("mi",null,"p"),Q("mn",null,"5")]),Q("mrow",null,[Q("mi",null,"s"),Q("mi",null,"W"),Q("mi",null,"d"),Q("mi",null,"i"),Q("mi",null,"t"),Q("mi",null,"h"),Q("mo",null,"−"),Q("mn",null,"1")])])])])],-1),p3={class:"MathJax",jax:"SVG",style:{direction:"ltr",position:"relative"}},m3={style:{overflow:"visible","min-height":"1px","min-width":"1px","vertical-align":"-1.108ex"},xmlns:"http://www.w3.org/2000/svg",width:"16.167ex",height:"3.478ex",role:"img",focusable:"false",viewBox:"0 -1047.1 7145.8 1537.1","aria-hidden":"true"},k3=t("",1),g3=[k3],c3=Q("mjx-assistive-mml",{unselectable:"on",display:"inline",style:{top:"0px",left:"0px",clip:"rect(1px, 1px, 1px, 1px)","-webkit-touch-callout":"none","-webkit-user-select":"none","-khtml-user-select":"none","-moz-user-select":"none","-ms-user-select":"none","user-select":"none",position:"absolute",padding:"1px 0px 0px 0px",border:"0px",display:"block",width:"auto",overflow:"hidden"}},[Q("math",{xmlns:"http://www.w3.org/1998/Math/MathML"},[Q("mi",null,"Y"),Q("mi",null,"p"),Q("mn",null,"4"),Q("mo",null,"="),Q("mrow",{"data-mjx-texclass":"ORD"},[Q("mfrac",null,[Q("mrow",null,[Q("mn",null,"1"),Q("mo",null,"−"),Q("mo",{stretchy:"false"},"("),Q("mn",null,"2"),Q("mi",null,"×"),Q("mi",null,"Y"),Q("mi",null,"p"),Q("mn",null,"5"),Q("mo",{stretchy:"false"},")")]),Q("mrow",null,[Q("mi",null,"s"),Q("mi",null,"H"),Q("mi",null,"e"),Q("mi",null,"i"),Q("mi",null,"g"),Q("mi",null,"h"),Q("mi",null,"t")])])])])],-1),H3=Q("h5",{id:"_2、ndc-空间坐标转换到投影空间坐标",tabindex:"-1"},"2、NDC 空间坐标转换到投影空间坐标 ​",-1),y3=Q("p",null,"我们在屏幕上点击的坐标位置，可以理解为在投影空间的近裁剪平面上的点 P3。假设近裁剪平面 X 轴最小坐标为 Pl，最大坐标为 Pr，Y 轴最大坐标为 Yt，最小坐标为 Yb，则有如下等式：",-1),E3={class:"MathJax",jax:"SVG",style:{direction:"ltr",position:"relative"}},w3={style:{overflow:"visible","min-height":"1px","min-width":"1px","vertical-align":"-1.238ex"},xmlns:"http://www.w3.org/2000/svg",width:"18.6ex",height:"3.607ex",role:"img",focusable:"false",viewBox:"0 -1047.1 8221.1 1594.2","aria-hidden":"true"},L3=t("",1),u3=[L3],x3=Q("mjx-assistive-mml",{unselectable:"on",display:"inline",style:{top:"0px",left:"0px",clip:"rect(1px, 1px, 1px, 1px)","-webkit-touch-callout":"none","-webkit-user-select":"none","-khtml-user-select":"none","-moz-user-select":"none","-ms-user-select":"none","user-select":"none",position:"absolute",padding:"1px 0px 0px 0px",border:"0px",display:"block",width:"auto",overflow:"hidden"}},[Q("math",{xmlns:"http://www.w3.org/1998/Math/MathML"},[Q("mrow",{"data-mjx-texclass":"ORD"},[Q("mfrac",null,[Q("mrow",null,[Q("mi",null,"X"),Q("mi",null,"p"),Q("mn",null,"4"),Q("mo",null,"−"),Q("mo",{stretchy:"false"},"("),Q("mo",null,"−"),Q("mn",null,"1"),Q("mo",{stretchy:"false"},")")]),Q("mrow",null,[Q("mn",null,"1"),Q("mo",null,"−"),Q("mo",{stretchy:"false"},"("),Q("mo",null,"−"),Q("mn",null,"1"),Q("mo",{stretchy:"false"},")")])])]),Q("mo",null,"="),Q("mrow",{"data-mjx-texclass":"ORD"},[Q("mfrac",null,[Q("mrow",null,[Q("mi",null,"X"),Q("mi",null,"p"),Q("mn",null,"3"),Q("mo",null,"−"),Q("mi",null,"P"),Q("mi",null,"l")]),Q("mrow",null,[Q("mo",{stretchy:"false"},"("),Q("mi",null,"P"),Q("mi",null,"r"),Q("mo",null,"−"),Q("mi",null,"P"),Q("mi",null,"l"),Q("mo",{stretchy:"false"},")")])])])])],-1),_3={class:"MathJax",jax:"SVG",style:{direction:"ltr",position:"relative"}},f3={style:{overflow:"visible","min-height":"1px","min-width":"1px","vertical-align":"-1.238ex"},xmlns:"http://www.w3.org/2000/svg",width:"18.523ex",height:"3.607ex",role:"img",focusable:"false",viewBox:"0 -1047.1 8187.2 1594.2","aria-hidden":"true"},M3=t("",1),V3=[M3],D3=Q("mjx-assistive-mml",{unselectable:"on",display:"inline",style:{top:"0px",left:"0px",clip:"rect(1px, 1px, 1px, 1px)","-webkit-touch-callout":"none","-webkit-user-select":"none","-khtml-user-select":"none","-moz-user-select":"none","-ms-user-select":"none","user-select":"none",position:"absolute",padding:"1px 0px 0px 0px",border:"0px",display:"block",width:"auto",overflow:"hidden"}},[Q("math",{xmlns:"http://www.w3.org/1998/Math/MathML"},[Q("mrow",{"data-mjx-texclass":"ORD"},[Q("mfrac",null,[Q("mrow",null,[Q("mi",null,"Y"),Q("mi",null,"p"),Q("mn",null,"4"),Q("mo",null,"−"),Q("mo",{stretchy:"false"},"("),Q("mo",null,"−"),Q("mn",null,"1"),Q("mo",{stretchy:"false"},")")]),Q("mrow",null,[Q("mo",{stretchy:"false"},"("),Q("mn",null,"1"),Q("mo",null,"−"),Q("mo",{stretchy:"false"},"("),Q("mo",null,"−"),Q("mn",null,"1"),Q("mo",{stretchy:"false"},")")])])]),Q("mo",null,"="),Q("mrow",{"data-mjx-texclass":"ORD"},[Q("mfrac",null,[Q("mrow",null,[Q("mi",null,"Y"),Q("mi",null,"p"),Q("mn",null,"3"),Q("mo",null,"−"),Q("mi",null,"P"),Q("mi",null,"b")]),Q("mrow",null,[Q("mo",{stretchy:"false"},"("),Q("mi",null,"P"),Q("mi",null,"t"),Q("mo",null,"−"),Q("mi",null,"P"),Q("mi",null,"b"),Q("mo",{stretchy:"false"},")")])])])])],-1),Z3=Q("p",null,"所以，可以推断NDC 空间坐标在投影面上的坐标为：",-1),v3={class:"MathJax",jax:"SVG",style:{direction:"ltr",position:"relative"}},F3={style:{overflow:"visible","min-height":"1px","min-width":"1px","vertical-align":"-1.238ex"},xmlns:"http://www.w3.org/2000/svg",width:"21.483ex",height:"3.41ex",role:"img",focusable:"false",viewBox:"0 -960.1 9495.6 1507.2","aria-hidden":"true"},C3=t("",1),A3=[C3],b3=Q("mjx-assistive-mml",{unselectable:"on",display:"inline",style:{top:"0px",left:"0px",clip:"rect(1px, 1px, 1px, 1px)","-webkit-touch-callout":"none","-webkit-user-select":"none","-khtml-user-select":"none","-moz-user-select":"none","-ms-user-select":"none","user-select":"none",position:"absolute",padding:"1px 0px 0px 0px",border:"0px",display:"block",width:"auto",overflow:"hidden"}},[Q("math",{xmlns:"http://www.w3.org/1998/Math/MathML"},[Q("mi",null,"X"),Q("mi",null,"p"),Q("mn",null,"3"),Q("mo",null,"="),Q("mrow",{"data-mjx-texclass":"ORD"},[Q("mfrac",null,[Q("mrow",null,[Q("mi",null,"X"),Q("mi",null,"p"),Q("mn",null,"4"),Q("mo",null,"+"),Q("mn",null,"1")]),Q("mrow",null,[Q("mn",null,"2"),Q("mi",null,"×"),Q("mo",{stretchy:"false"},"("),Q("mi",null,"P"),Q("mi",null,"r"),Q("mo",null,"−"),Q("mi",null,"P"),Q("mi",null,"l"),Q("mo",{stretchy:"false"},")")])])]),Q("mo",null,"+"),Q("mi",null,"P"),Q("mi",null,"l")])],-1),B3={class:"MathJax",jax:"SVG",style:{direction:"ltr",position:"relative"}},j3={style:{overflow:"visible","min-height":"1px","min-width":"1px","vertical-align":"-0.781ex"},xmlns:"http://www.w3.org/2000/svg",width:"29.785ex",height:"2.953ex",role:"img",focusable:"false",viewBox:"0 -960.1 13164.9 1305.1","aria-hidden":"true"},P3=t("",1),S3=[P3],R3=Q("mjx-assistive-mml",{unselectable:"on",display:"inline",style:{top:"0px",left:"0px",clip:"rect(1px, 1px, 1px, 1px)","-webkit-touch-callout":"none","-webkit-user-select":"none","-khtml-user-select":"none","-moz-user-select":"none","-ms-user-select":"none","user-select":"none",position:"absolute",padding:"1px 0px 0px 0px",border:"0px",display:"block",width:"auto",overflow:"hidden"}},[Q("math",{xmlns:"http://www.w3.org/1998/Math/MathML"},[Q("mi",null,"Y"),Q("mi",null,"p"),Q("mn",null,"3"),Q("mo",null,"="),Q("mrow",{"data-mjx-texclass":"ORD"},[Q("mfrac",null,[Q("mrow",null,[Q("mi",null,"Y"),Q("mi",null,"p"),Q("mn",null,"4"),Q("mo",null,"+"),Q("mn",null,"1")]),Q("mn",null,"2")])]),Q("mi",null,"×"),Q("mo",{stretchy:"false"},"("),Q("mi",null,"P"),Q("mi",null,"t"),Q("mo",null,"−"),Q("mi",null,"P"),Q("mi",null,"b"),Q("mo",{stretchy:"false"},")"),Q("mo",null,"+"),Q("mi",null,"P"),Q("mi",null,"b")])],-1),I3=Q("p",null,"推断出 NDC 空间坐标在投影面上的 X、Y 轴坐标之后，我们就开始考虑为其扩展 3D 坐标 Z 值了。",-1),N3=Q("p",null,"因为近裁剪平面，Z 值是我们做投影变换矩阵的运算时选取的，所以，我们可以采用近裁剪平面的 Z 值作为 P3 的 Z 轴坐标。",-1),X3=Q("p",null,"至此，我们得到了投影空间坐标，投影空间坐标转换到观察空间坐标，只需一步，将 Z 轴坐标反向即可。",-1),O3=Q("h5",{id:"投影空间坐标到观察空间坐标",tabindex:"-1"},"投影空间坐标到观察空间坐标 ​",-1),G3=Q("p",null,"转换到投影空间坐标为 P2，那么P2与 P3 的关系如下：",-1),J3={class:"MathJax",jax:"SVG",style:{direction:"ltr",position:"relative"}},z3={style:{overflow:"visible","min-height":"1px","min-width":"1px","vertical-align":"-0.439ex"},xmlns:"http://www.w3.org/2000/svg",width:"11.411ex",height:"1.984ex",role:"img",focusable:"false",viewBox:"0 -683 5043.6 877","aria-hidden":"true"},Y3=t("",1),W3=[Y3],U3=Q("mjx-assistive-mml",{unselectable:"on",display:"inline",style:{top:"0px",left:"0px",clip:"rect(1px, 1px, 1px, 1px)","-webkit-touch-callout":"none","-webkit-user-select":"none","-khtml-user-select":"none","-moz-user-select":"none","-ms-user-select":"none","user-select":"none",position:"absolute",padding:"1px 0px 0px 0px",border:"0px",display:"block",width:"auto",overflow:"hidden"}},[Q("math",{xmlns:"http://www.w3.org/1998/Math/MathML"},[Q("mi",null,"X"),Q("mi",null,"p"),Q("mn",null,"2"),Q("mo",null,"="),Q("mi",null,"X"),Q("mi",null,"p"),Q("mn",null,"3")])],-1),$3={class:"MathJax",jax:"SVG",style:{direction:"ltr",position:"relative"}},q3={style:{overflow:"visible","min-height":"1px","min-width":"1px","vertical-align":"-0.439ex"},xmlns:"http://www.w3.org/2000/svg",width:"11.008ex",height:"1.984ex",role:"img",focusable:"false",viewBox:"0 -683 4865.6 877","aria-hidden":"true"},K3=t("",1),Q1=[K3],t1=Q("mjx-assistive-mml",{unselectable:"on",display:"inline",style:{top:"0px",left:"0px",clip:"rect(1px, 1px, 1px, 1px)","-webkit-touch-callout":"none","-webkit-user-select":"none","-khtml-user-select":"none","-moz-user-select":"none","-ms-user-select":"none","user-select":"none",position:"absolute",padding:"1px 0px 0px 0px",border:"0px",display:"block",width:"auto",overflow:"hidden"}},[Q("math",{xmlns:"http://www.w3.org/1998/Math/MathML"},[Q("mi",null,"Y"),Q("mi",null,"p"),Q("mn",null,"2"),Q("mo",null,"="),Q("mi",null,"Y"),Q("mi",null,"p"),Q("mn",null,"3")])],-1),a1={class:"MathJax",jax:"SVG",style:{direction:"ltr",position:"relative"}},s1={style:{overflow:"visible","min-height":"1px","min-width":"1px","vertical-align":"-0.439ex"},xmlns:"http://www.w3.org/2000/svg",width:"12.587ex",height:"1.984ex",role:"img",focusable:"false",viewBox:"0 -683 5563.6 877","aria-hidden":"true"},T1=t("",1),i1=[T1],l1=Q("mjx-assistive-mml",{unselectable:"on",display:"inline",style:{top:"0px",left:"0px",clip:"rect(1px, 1px, 1px, 1px)","-webkit-touch-callout":"none","-webkit-user-select":"none","-khtml-user-select":"none","-moz-user-select":"none","-ms-user-select":"none","user-select":"none",position:"absolute",padding:"1px 0px 0px 0px",border:"0px",display:"block",width:"auto",overflow:"hidden"}},[Q("math",{xmlns:"http://www.w3.org/1998/Math/MathML"},[Q("mi",null,"Z"),Q("mi",null,"p"),Q("mn",null,"2"),Q("mo",null,"="),Q("mo",null,"−"),Q("mi",null,"Z"),Q("mi",null,"p"),Q("mn",null,"3")])],-1),e1={class:"MathJax",jax:"SVG",style:{direction:"ltr",position:"relative"}},n1={style:{overflow:"visible","min-height":"1px","min-width":"1px","vertical-align":"-0.439ex"},xmlns:"http://www.w3.org/2000/svg",width:"8.789ex",height:"1.984ex",role:"img",focusable:"false",viewBox:"0 -683 3884.6 877","aria-hidden":"true"},h1=t("",1),d1=[h1],r1=Q("mjx-assistive-mml",{unselectable:"on",display:"inline",style:{top:"0px",left:"0px",clip:"rect(1px, 1px, 1px, 1px)","-webkit-touch-callout":"none","-webkit-user-select":"none","-khtml-user-select":"none","-moz-user-select":"none","-ms-user-select":"none","user-select":"none",position:"absolute",padding:"1px 0px 0px 0px",border:"0px",display:"block",width:"auto",overflow:"hidden"}},[Q("math",{xmlns:"http://www.w3.org/1998/Math/MathML"},[Q("mi",null,"W"),Q("mi",null,"p"),Q("mn",null,"2"),Q("mo",null,"="),Q("mn",null,"1")])],-1),o1=t("",30);function p1(m1,k1,g1,c1,H1,y1){return s(),a("div",null,[e,Q("p",null,[Q("mjx-container",n,[(s(),a("svg",h,r)),o])]),p,m,k,Q("p",null,[Q("mjx-container",g,[(s(),a("svg",c,y)),E])]),w,L,Q("p",null,[Q("mjx-container",u,[(s(),a("svg",x,f)),M])]),V,D,Q("p",null,[Q("mjx-container",Z,[(s(),a("svg",v,C)),A])]),b,B,j,P,S,R,I,N,X,Q("p",null,[T("当我们在屏幕上点击时，得到一个屏幕坐标系（视口）上的二维坐标 "),Q("mjx-container",O,[(s(),a("svg",G,z)),Y]),T(" ，接下来，我们需要沿坐标变换流水线的逆序进行操作。")]),W,U,Q("p",null,[Q("mjx-container",$,[(s(),a("svg",q,Q3)),t3])]),Q("p",null,[Q("mjx-container",a3,[(s(),a("svg",s3,i3)),l3]),T(" ​")]),e3,Q("p",null,[Q("mjx-container",n3,[(s(),a("svg",h3,r3)),o3])]),Q("p",null,[Q("mjx-container",p3,[(s(),a("svg",m3,g3)),c3])]),H3,y3,Q("p",null,[Q("mjx-container",E3,[(s(),a("svg",w3,u3)),x3]),T("​")]),Q("p",null,[Q("mjx-container",_3,[(s(),a("svg",f3,V3)),D3])]),Z3,Q("p",null,[Q("mjx-container",v3,[(s(),a("svg",F3,A3)),b3])]),Q("p",null,[Q("mjx-container",B3,[(s(),a("svg",j3,S3)),R3])]),I3,N3,X3,O3,G3,Q("p",null,[Q("mjx-container",J3,[(s(),a("svg",z3,W3)),U3])]),Q("p",null,[Q("mjx-container",$3,[(s(),a("svg",q3,Q1)),t1])]),Q("p",null,[Q("mjx-container",a1,[(s(),a("svg",s1,i1)),l1])]),Q("p",null,[Q("mjx-container",e1,[(s(),a("svg",n1,d1)),r1])]),o1])}const _1=i(l,[["render",p1]]);export{x1 as __pageData,_1 as default};
